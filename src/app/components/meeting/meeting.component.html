<app-top-bar
[meetingId]="roomId"
[isMicOn]="isMicOn"
[isWebcamOn]="true"
(toogleWebcam)="toogleWebcam()"
(toogleMic)="toogleMic()"
(leaveMeeting)="leaveMeeting()"
(startRecording)="startStopRecording()"
(startRecordingAudio)="startStopRecordingAudio()"
#topbar
></app-top-bar>

<div class="device-settings-bar" role="region" aria-label="Device Settings">
    <div class="device-selector-group">
        <div class="device-selector">
          
            <select [formControl]="micSelected" id="audioInput" class="device-select" aria-label="Select microphone" (change)="onAudioInputChange()">
                <option value="">Select microphone</option>
                @for(mic of mics; track mic.deviceId){
                    <option value="{{ mic.deviceId }}">{{ mic.label }}</option>
                }
            </select>
        </div>    

       
    </div>

    
</div>

<div
    style="
      display: flex;
      flex-direction: column;
      overflow-y: auto;
      max-height: calc(100vh - 85px);
    "
  >
    <div class="container">
      <div
        #participantGridContainer
        id="participant-grid-container"
        class="row"
      ></div>
      <div
      #participantScreenShareContainer
      id="participant-screen-container"
      style="width:360px;aspect-ratio: 16/9;border-radius: 10px;display: none;"
      ></div>
    </div>

    <div class="chat-section" role="complementary" aria-label="Chat">
        <div class="chat-header">
            <h2>Chat</h2>
        </div>
        <div class="chat-messages" role="log" aria-live="polite">
            <!-- Messages will be populated here -->
        </div>
        <div class="chat-input-container">
            <input 
                type="text" 
                class="chat-input" 
                placeholder="Type your message..." 
                aria-label="Type a message"
            >
            <button 
                class="send-button" 
                aria-label="Send message"
            >
                Send
            </button>
        </div>
    </div>
  </div>